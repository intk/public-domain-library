{# Automatically extends the right outer layout and also handles AJAX siutations #}
{% extends data.outerLayout %}

{% set title = data.piece.title or data.page.title %}
{% block title %}
  {{ title }}
  {% if not title %}
    {{ apos.log('Looks like you forgot to override the title block in a template that does not have access to an Apostrophe page or piece.') }}
  {% endif %}
{% endblock %}

{% import "locale-switcher:index.html" as localeSwitcher with context %}

{% block beforeMain %}
<div class="pdl-wrapper">
  <header class="pdl-header">
    <a href="/" class="pdl-header__title">
      <canvas class="pdl-header__logo"></canvas>
      <span>Public Domain Library</span>
    </a>

    <nav class="pdl-nav">
      <svg class="pdl-nav__item pdl-nav__item--search" width="23" height="32" viewBox="0 0 23 32" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1630_2013)">
          <circle cx="9.95967" cy="13.9597" r="8.45967" stroke="currentColor" fill="black" stroke-width="3"/>
          <line x1="15.6581" y1="20.0272" x2="22.0607" y2="26.4299" stroke="currentColor" stroke-width="3"/>
        </g>
        <defs>
          <clipPath id="clip0_1630_2013">
            <rect width="23" height="32" fill="currentColor"/>
          </clipPath>
        </defs>
      </svg>

      {% for item in data.global.headerNav %}
          <a href="{{ item._page[0]._url }}" class="pdl-nav__item">{{ item._page[0].title }}</a>
      {% endfor %}

      <span class="pdl-nav__item">
        {{ localeSwitcher.display() }}
      </span>
    </nav>

    <nav class="pdl-nav pdl-nav--mobile" data-open-side-nav>
      <i></i>
      <i></i>
      <i></i>
    </nav>

    <div class="pdl-sidenav" data-side-nav>
      <canvas class="pdl-header__logo pdl-header__logo--mobile"></canvas>
      <a href="javascript:void(0)" class="pdl-sidenav__close" data-close-side-nav>
        <i></i>
        <i></i>
      </a>

      {% for item in data.global.footerNav %}
        <a href="{{ item._page[0]._url }}" class="pdl-nav__item">{{ item._page[0].title }}</a>
      {% endfor %}
      <a href="#" class="pdl-nav__item pdl-nav__item--search">
        Search
        <svg width="23" height="32" viewBox="0 0 23 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1630_2013)">
        <circle cx="9.95967" cy="13.9597" r="8.45967" stroke="white" stroke-width="3"/>
        <line x1="15.6581" y1="20.0272" x2="22.0607" y2="26.4299" stroke="white" stroke-width="3"/>
        </g>
        <defs>
        <clipPath id="clip0_1630_2013">
        <rect width="23" height="32" fill="white"/>
        </clipPath>
        </defs>
        </svg>
      </a>
      <span class="pdl-nav__item pdl-nav__item--locale-switcher">
        {{ localeSwitcher.display() }}
      </span>
    </div>
  </header>
  <main class="pdl-main">
{% endblock %}

{% block main %}{% endblock %}

{% block afterMain %}
  </main>
  <footer class="pdl-footer">

    <div class="pdl-footer__nav">
      <nav class="pdl-nav pdl-nav--footer">
        {% for item in data.global.footerNav %}
          <a href="{{ item._page[0]._url }}" class="pdl-nav__item">{{ item._page[0].title }}</a>
        {% endfor %}
      </nav>
      <div class="pdl-footer__social">
        {% for item in data.global.social %}
          {% set icon = apos.attachment.first(item) %}
          <a class="pdl-footer__social-link" target="_blank" href="{{ item.url }}">
            <img src="{{ apos.attachment.url(icon) }}" alt="icon-{{ icon.name }}" loading="lazy" />
          </a>
        {% endfor %}
      </div>
    </div>

    <div class="pdl-footer__info">
      <div class="pdl-footer__sentence">
        <span class="pdl-footer__motto">Celebrating</span>
        <canvas class="pdl-footer__logo"></canvas>
        <div class="pdl-footer__motto">Human Creativity</div>
      </div>
      <div class="pdl-footer__legal">
        {% for item in data.global.footerLegal %}
          <a href="{{ item._page[0]._url }}" class="pdl-footer__legal-link">{{ item._page[0].title }}</a>
        {% endfor %}
      </div>
    </div>

  </footer>
</div>{# Close .pdl-wrapper #}
{% endblock %}
